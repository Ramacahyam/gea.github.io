<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shipping Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex justify-center items-center flex-col">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl">
      <h2 class="text-2xl font-bold mb-6">Shipping Information</h2>

      <!-- Contact -->
      <div class="mb-6">
        <h3 class="font-semibold mb-2">Contact</h3>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <input
            type="text"
            placeholder="Name"
            class="col-span-2 border p-3 rounded placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
          />

          <div class="flex">
            <span class="border border-r-0 p-3 bg-gray-50 rounded-l">+94</span>
            <input
              type="text"
              placeholder="Mobile"
              class="w-full border p-3 rounded-r placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
            />
          </div>
        </div>
      </div>

      <!-- Address -->
      <div class="mb-6">
        <h3 class="font-semibold mb-2">Address</h3>

        <div class="grid grid-cols-2 gap-4 mb-4">
          <input
            type="text"
            placeholder="Street"
            class="border p-3 rounded placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
          />

          <input
            type="text"
            placeholder="Apartment, Unit, etc"
            class="border p-3 rounded placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
          />
        </div>

        <div class="grid grid-cols-3 gap-4 mb-4">
          <select
            class="border p-3 rounded focus:ring-2 focus:ring-red-400 focus:outline-none"
          >
            <option>Sri Lanka</option>
            <option>Indonesia</option>
            <option>Malaysia</option>
          </select>

          <input
            type="text"
            placeholder="State/Province/Region"
            class="border p-3 rounded placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
          />

          <input
            type="text"
            placeholder="City"
            class="border p-3 rounded placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
          />
        </div>

        <input
          type="text"
          placeholder="Zip Code"
          class="border p-3 rounded w-1/2 placeholder-gray-400 focus:ring-2 focus:ring-red-400 focus:outline-none"
        />
      </div>

      <!-- Checkbox -->
      <div class="flex items-center mb-6">
        <input type="checkbox" class="mr-2" />
        <label class="text-sm text-gray-600">Set as default</label>
      </div>

      <!-- Button -->
      <button
        class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded w-40 rounded-xl"
      >
        Confirm
      </button>
    </div>

    <!-- halaman produk -->
    <div
      class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl mt-2 checkout-container"
    >
      <div class=""><h1 class="font-bold text-2xl">order</h1></div>
    </div>
    <!-- sub total -->
    <div
      class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl mt-2 capitalize"
    >
      <h1 class="font-bold uppercase text-xl">summary</h1>
      <div class="flex gap-9 justify-between mr-4">
        <h1 class="text-lg mt-2">subtotal</h1>
        <p class="mt-2 subtotal">$ 100</p>
      </div>
      <div class="flex gap-9 justify-between mr-4">
        <h1 class="text-lg">estimated delivery</h1>
        <p class="">$ 0</p>
      </div>
      <div class="flex gap-9 justify-between mr-4">
        <h1 class="text-lg">estimated duties and taxes</h1>
        <p class="">$ 0</p>
      </div>

      <div class="mt-4 border-t-2 border-b-2 flex justify-between">
        <h1 class="mt-2 mb-2">total</h1>
        <p class="mr-4 mt-2 total">$ 100</p>
      </div>

      <div
        class="w-40 h-14 bg-red-500 mt-4 rounded-2xl flex items-center justify-center text-white text-lg pengumuman"
      >
        <h1>checkout</h1>
      </div>
    </div>

    <!-- javascrip -->
    <script>
      const data = JSON.parse(localStorage.getItem("checkoutItems")) || [];
      const container = document.querySelector(".checkout-container");
      const hasil = document.querySelector(".total");
      const subtotal = document.querySelector(".subtotal");

      function renderCart() {
        container.innerHTML = `<h1 class="font-bold text-2xl">order</h1>`;

        data.forEach((items, index) => {
          container.innerHTML += `<div>

              <div class="flex text-sm gap-3 mt-3">

                <div class="w-24 mt-2">
                  <img src="${items.images}" alt="" class="rounded-2xl" />
                </div>
                <div class="w-80">
                  <div class="text-xl capitalize font-serif"><h1>${items.name}</h1></div>
                  <p>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus
                    obcaecati iure blanditiis laborum,
                  </p>
                  <div class="flex gap-2 font-bold justify-between">
                    <h1>us : $${items.price}</h1>
                    <div class="flex mt-2 gap-3 text-xl">
                      <p class="tambah cursor-pointer" data-index="${index}">+</p>
                <p>${items.qty}</p>
                <p class="kurang cursor-pointer" data-index="${index}">-</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>`;
        });
        total();
      }

      // menambah dan mengurangi qty

      container.addEventListener("click", function (e) {
        if (e.target.classList.contains("tambah")) {
          console.log("hai");
          const index = e.target.dataset.index;
          data[index].qty += 1;
          localStorage.setItem("checkoutItems", JSON.stringify(data));
          renderCart();
        }

        if (e.target.classList.contains("kurang")) {
          const index = e.target.dataset.index;
          if (data[index].qty > 1) {
            data[index].qty -= 1;
          } else {
            data.splice(index, 1);
          }
          localStorage.setItem("checkoutItems", JSON.stringify(data));
          renderCart();
        }
      });
      // total belanja
      function total() {
        const total = data.reduce((sum, items) => {
          return sum + items.price * items.qty;
        }, 0);
        hasil.textContent = "$" + total;
        subtotal.textContent = "$" + total;
      }
      total();
      renderCart();

      const hai = document.querySelector(".pengumuman");
      hai.addEventListener("click", function () {
        alert("sabar ya masi dalam pengerjaanðŸ«¡");
      });
    </script>
  </body>
</html>
